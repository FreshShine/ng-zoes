!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("ng-zorro-antd/i18n"),require("rxjs/operators"),require("ng-zorro-antd/core/util"),require("ng-zorro-antd/modal"),require("@angular/cdk/portal"),require("@angular/cdk/overlay-prebuilt.css"),require("@angular/cdk/overlay"),require("@angular/common"),require("ng-zorro-antd"),require("@angular/cdk/keycodes"),require("@angular/common/http"),require("ng-zorro-antd/core/logger"),require("@angular/animations"),require("lodash"),require("@angular/common/locales/en"),require("@angular/platform-browser/animations"),require("@angular/forms"),require("ngx-sortablejs"),require("@ant-design/icons-angular/icons"),require("image-compressor.js")):"function"==typeof define&&define.amd?define("ng-zoes",["exports","@angular/core","rxjs","ng-zorro-antd/i18n","rxjs/operators","ng-zorro-antd/core/util","ng-zorro-antd/modal","@angular/cdk/portal","@angular/cdk/overlay-prebuilt.css","@angular/cdk/overlay","@angular/common","ng-zorro-antd","@angular/cdk/keycodes","@angular/common/http","ng-zorro-antd/core/logger","@angular/animations","lodash","@angular/common/locales/en","@angular/platform-browser/animations","@angular/forms","ngx-sortablejs","@ant-design/icons-angular/icons","image-compressor.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng-zoes"]={},e.ng.core,e.rxjs,e.i18n,e.rxjs.operators,e.util,e.i1,e.ng.cdk.portal,e.ng.cdk.overlayPrebuiltCss,e.ng.cdk.overlay,e.ng.common,e.ngZorroAntd,e.ng.cdk.keycodes,e.ng.common.http,e.logger,e.ng.animations,e._,e.ng.common.locales.en,e.ng.platformBrowser.animations,e.ng.forms,e.ngxSortablejs,e.icons$1,e.ImageCompressor)}(this,(function(e,t,n,o,i,r,a,l,p,s,c,d,u,h,f,g,m,y,v,b,z,w,C){"use strict";m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C;function I(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function x(e,t){return function(n,o){t(n,o,e)}}function T(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{p(o.next(e))}catch(e){r(e)}}function l(e){try{p(o.throw(e))}catch(e){r(e)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}p((o=o.apply(e,t||[])).next())}))}function S(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}function k(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function O(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}var L={abbr:"zh-CN",zt:{emptyText:"暂无数据",clearText:"清空",total:"共 {{total}} 条"},zu:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件",uploadStorage:"暂存文件"},zf:{submit:"提交",cancel:"取消"}},F=new t.InjectionToken("zoe-locale"),U={"en-US":o.en_US,"zh-CN":o.zh_CN,"zh-TW":o.zh_TW};function P(t,n){return t||new e.LocaleService(null,n)}e.LocaleService=function(){function e(e,t){this.i18n=e,this.change$=new n.BehaviorSubject(this._locale),this.setLocale(t||L)}return Object.defineProperty(e.prototype,"change",{get:function(){return this.change$.asObservable()},enumerable:!0,configurable:!0}),e.prototype.setLocale=function(e){var t,n;if(!this._locale||this._locale.abbr!==e.abbr){this._locale=e;try{for(var o=k(Object.entries(U)),i=o.next();!i.done;i=o.next()){var r=_(i.value,2),a=r[0],l=r[1];e.abbr==a&&(console.log(l),this.i18n.setLocale(l))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this.change$.next(e)}},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),e.prototype.getData=function(e){return this._locale[e]||{}},e}(),e.LocaleService=I([t.Injectable(),x(1,t.Inject(F))],e.LocaleService);var D={provide:e.LocaleService,useFactory:P,deps:[[new t.Optional,new t.SkipSelf,e.LocaleService],F]},j=L;e.LocaleModule=function(){},e.LocaleModule=I([t.NgModule({providers:[{provide:F,useValue:j},D]})],e.LocaleModule),e.TableComponent=function(){function e(e,n,o){this.cdr=e,this.servie=n,this.locale=o,this.columns=[],this.ps=10,this.pi=1,this.loading=null,this.change=new t.EventEmitter,this.bordered=!1,this._allChecked=!1,this._allCheckedDisabled=!1,this._indeterminate=!1,this.totalTpl="",this._isPagination=!0,this._isSizeChanger=!1,this._isQuickJumper=!1,this._isPageSizeOptions=[10,20,30,40,50],this._isOnSinglePage=!1,this._paginationPosition="bottom",this._frontPagination=!0,this._data=[],this.local=this.locale.getData("zt")}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.url||e.req||e.pi||e.ps?this._loadData(this.url,this.req):e.data&&this._showData(e.data.currentValue),e.loading,e.operators&&this._changeOperator(e.operators.currentValue),e.page&&(this.updateTotalTpl(),this._changePage(e.page.currentValue))},e.prototype._refCheck=function(){var e=this._data.filter((function(e){return!e.disabled})),t=e.filter((function(e){return!0===e.checked}));console.log(t),this._allChecked=t.length>0&&t.length===e.length;var n=e.every((function(e){return!e.checked}));return this._indeterminate=!this._allChecked&&!n,console.log("_indeterminate:"+this._indeterminate),this._allCheckedDisabled=this._data.length===this._data.filter((function(e){return e.disabled})).length,this.cd()},e.prototype.cd=function(){return this.cdr.detectChanges(),this},e.prototype.updateTotalTpl=function(){var e=this.page.total;"string"==typeof e&&e.length?this.totalTpl=e:this.toBoolean(e)?this.totalTpl=this.local.total:this.totalTpl=""},e.prototype.toBoolean=function(e,t){return void 0===t&&(t=!1),t&&void 0===e?void 0:null!=e&&""+e!="false"},e.prototype._checkNotify=function(){var e=this._data.filter((function(e){return!e.disabled&&!0===e.checked}));return console.log(e),this.changeEmit("checkbox",e),this},e.prototype._checkAll=function(e,t){return e=void 0===e?this._allChecked:e,this._data.filter((function(e){return!e.disabled})).forEach((function(t){return t.checked=e})),this._refCheck()._checkNotify()},e.prototype._checkSelection=function(e,t){return e.checked=t,this._refCheck()._checkNotify()},e.prototype._refRadio=function(e,t){return this._data.filter((function(e){return!e.disabled})).forEach((function(e){return e.checked=!1})),t.checked=e,this.changeEmit("radio",t),this},e.prototype._changeOperator=function(e){var t=[];e&&e.length>0&&(e.forEach((function(e){!e.hidden&&t.push(e)})),this.operators=t)},e.prototype._changePage=function(e){this._frontPagination=e.front,this._isPageSizeOptions=e.pageSizes,this._paginationPosition=e.position,this._isPagination=e.show,this._isQuickJumper=e.showQuickJumper,this._isSizeChanger=e.showSize},e.prototype._pageIndexChange=function(e){this.pi=e,this._allChecked=!1,this.changeEmit("pi",e)},e.prototype._pageSizeChange=function(e){this.pi=1,this.ps=e,this.changeEmit("ps",e)},e.prototype._showData=function(e){this._data=e,this.total=this.total?this.total:e.length},e.prototype._loadData=function(e,t){var n=this;e&&(t.reName&&(t.params[t.reName.pi]=this.pi-1,t.params[t.reName.ps]=this.ps),this.loading=!0,this.servie.patchHero(e,t).subscribe((function(e){return n._data=e,n.loading=!1,n.changeEmit("loaded",e),n._refCheck()._checkNotify()}),(function(e){n.loading=!1})))},e.prototype._rowClick=function(e,t,n){if("INPUT"!==e.target.nodeName){var o={e:e,item:t,index:n};this.changeEmit("click",o)}},e.prototype.setData=function(e,t){this._data=e,this.total=t},e.prototype.changeEmit=function(e,t){var n={type:e,pi:this.pi,ps:this.ps,total:this.total};null!=t&&(n[e]=t),this.change.emit(n)},e.prototype.renderTotal=function(e,t){return this.totalTpl?this.totalTpl.replace("{{total}}",this.total?this.total:e).replace("{{range[0]}}",t[0]).replace("{{range[1]}}",t[1]):""},e}(),I([t.Input()],e.TableComponent.prototype,"data",void 0),I([t.Input()],e.TableComponent.prototype,"columns",void 0),I([t.Input()],e.TableComponent.prototype,"ps",void 0),I([t.Input()],e.TableComponent.prototype,"pi",void 0),I([t.Input()],e.TableComponent.prototype,"total",void 0),I([t.Input()],e.TableComponent.prototype,"loading",void 0),I([t.Input()],e.TableComponent.prototype,"scroll",void 0),I([t.Input()],e.TableComponent.prototype,"url",void 0),I([t.Input()],e.TableComponent.prototype,"req",void 0),I([t.Input()],e.TableComponent.prototype,"page",void 0),I([t.Input()],e.TableComponent.prototype,"operators",void 0),I([t.Output()],e.TableComponent.prototype,"change",void 0),I([t.Input()],e.TableComponent.prototype,"bordered",void 0),I([t.ViewChild("table",{static:!1})],e.TableComponent.prototype,"orgTable",void 0),e.TableComponent=I([t.Component({selector:"zt",template:'<ng-container>\r\n  <nz-button-group>\r\n    <button *ngFor="let operator of operators" nz-button [nzType]="operator.type" (click)="operator.click()">\r\n      {{operator.text}}\r\n    </button>\r\n  </nz-button-group>\r\n</ng-container>\r\n\r\n<nz-table #table [nzData]="_data" [nzTotal]="total"  [nzBordered]="bordered" [nzLoading]="loading"   [nzScroll]="scroll"  [(nzPageIndex)]="pi"\r\n  [(nzPageSize)]="ps" [nzShowPagination]="_isPagination" [nzShowQuickJumper]="_isQuickJumper"\r\n  [nzPageSizeOptions]="_isPageSizeOptions" [nzHideOnSinglePage]="_isOnSinglePage"\r\n  [nzPaginationPosition]="_paginationPosition" [nzFrontPagination]="_frontPagination"\r\n  [nzShowSizeChanger]="_isSizeChanger" (nzPageIndexChange)="_pageIndexChange($event)"\r\n  (nzPageSizeChange)="_pageSizeChange($event)"  [nzShowTotal]="totalTpl">\r\n  <thead>\r\n    <tr>\r\n      <th *ngFor="let col of columns; let $index = index" [nzAlign]="col.type && col.type==\'checkbox\'?\'center\':\'auto\'">\r\n        <label *ngIf="col.type && col.type==\'checkbox\'" nz-checkbox [(ngModel)]="_allChecked"\r\n          [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event,col)"></label>\r\n        <span *ngIf="!col.type || col.type!=\'checkbox\'">{{col.text}}</span>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <ng-container *ngFor="let dataItem of table.data;let i = index;">\r\n      <tr (click)="_rowClick($event, dataItem, i)">\r\n        <ng-container *ngFor="let col of columns; let ii = index">\r\n          \x3c!-- normal --\x3e\r\n          <ng-container *ngIf="!col.pipe && !col.pipeType && !col.type && !col.render && !col.buttons">\r\n            <td> {{dataItem[col.index]}}</td>\r\n          </ng-container>\r\n          \x3c!-- type --\x3e\r\n          <ng-container *ngIf="!col.pipe && !col.pipeType && col.type && !col.render && !col.buttons">\r\n            <td [nzAlign]="col.type && (col.type==\'checkbox\' || col.type==\'radio\')?\'center\':\'auto\'" >\r\n              <ng-container [ngSwitch]="col.type">\r\n                <label *ngSwitchCase="\'checkbox\'" nz-checkbox [nzDisabled]="dataItem.disabled"\r\n                  [ngModel]="dataItem.checked" (ngModelChange)="_checkSelection(dataItem, $event)"></label>\r\n                <label *ngSwitchCase="\'radio\'" nz-radio [nzDisabled]="dataItem.disabled" [ngModel]="dataItem.checked"\r\n                  (ngModelChange)="_refRadio($event, dataItem)"></label>\r\n                <img *ngSwitchCase="\'img\'" style="width: auto; height: 30px;" [src]="dataItem[col.index]" alt=""\r\n                  srcset="">\r\n              </ng-container>\r\n            </td>\r\n          </ng-container>\r\n          \x3c!-- pipe --\x3e\r\n          <ng-container *ngIf="col.pipe && !col.pipeType && !col.type && !col.render && !col.buttons">\r\n            <td>{{dataItem[col.index] | tablePipe: col.pipe}}</td>\r\n          </ng-container>\r\n          \x3c!-- pipeType --\x3e\r\n          <ng-container *ngIf="!col.pipe && col.pipeType && !col.type && !col.render && !col.buttons">\r\n            <td>\r\n              {{dataItem[col.index] | date:col.pipeType ===\'timestampHms\'?\'yyyy-MM-dd HH:mm:ss\':(col.pipeType ===\'timestamp\'?\'yyyy-MM-dd\':\'yyyy-MM-dd\')}}\r\n            </td>\r\n          </ng-container>\r\n          \x3c!-- render --\x3e\r\n          <ng-container *ngIf="!col.pipe && !col.pipeType && !col.type && col.render && !col.buttons">\r\n            <td>\r\n              <div [innerHTML]=" dataItem[col.index] | renderPipe:dataItem:col.index:col.render">\r\n              </div>\r\n            </td>\r\n          </ng-container>\r\n          \x3c!-- buttons --\x3e\r\n          <ng-container *ngIf="!col.pipe && !col.pipeType && !col.type && !col.render && col.buttons">\r\n            <td>\r\n              <table-columns-buttons [buttons]="col.buttons" [type]="col.buttonType" [row]="dataItem" [rowIndex]="i">\r\n              </table-columns-buttons>\r\n            </td>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tr>\r\n    </ng-container>\r\n\r\n  </tbody>\r\n  <ng-template #totalTpl let-range="range" let-total>{{ renderTotal(total, range) }}</ng-template>\r\n</nz-table>\r\n',styles:["button{margin-bottom:12px;margin-right:12px}"]})],e.TableComponent),e.TableColumnsButtonsComponent=function(){function e(){this.type="button",this.extButtons=[],this.normalButtons=[]}return e.prototype.ngOnInit=function(){var e,t,n=[];try{for(var o=k(this.buttons),i=o.next();!i.done;i=o.next()){var r=i.value;r.permission?r.permission(this.row,this.rowIndex)&&n.push(r):n.push(r)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.normalButtons=n},e}(),I([t.Input()],e.TableColumnsButtonsComponent.prototype,"buttons",void 0),I([t.Input()],e.TableColumnsButtonsComponent.prototype,"type",void 0),I([t.Input()],e.TableColumnsButtonsComponent.prototype,"row",void 0),I([t.Input()],e.TableColumnsButtonsComponent.prototype,"rowIndex",void 0),I([t.Input()],e.TableColumnsButtonsComponent.prototype,"extButtons",void 0),e.TableColumnsButtonsComponent=I([t.Component({selector:"table-columns-buttons",template:'<ng-container>\r\n    <nz-button-group *ngIf="type==\'button\'">\r\n      <button nz-button *ngFor="let action of normalButtons" [nzType]="action.type" (click)="action.click(row,rowIndex)">{{action.text}}</button>\r\n    </nz-button-group>\r\n    <ng-container  *ngIf="type==\'link\'">\r\n      <ng-container *ngFor="let action of normalButtons;let $index = index;">\r\n          <a (click)="action.click(row,rowIndex)">{{action.text}}</a>\r\n          <nz-divider *ngIf="$index!=normalButtons.length-1" nzType="vertical"></nz-divider>\r\n      </ng-container>\r\n    </ng-container>\r\n</ng-container>\r\n\r\n',styles:["button{margin-right:12px}"]})],e.TableColumnsButtonsComponent),e.DroppableComponent=function(){function e(){var e=this;this.disabled=!1,this.zdSortChange=new t.EventEmitter,this.options={onUpdate:function(t){e.zdSortChange.emit(e.data)}}}return e.prototype.ngOnInit=function(){this._setOption(this.disabled)},e.prototype.ngOnChanges=function(e){e.disabled&&this._disabledChange(e.disabled.currentValue)},e.prototype._disabledChange=function(e){this._setOption(e)},e.prototype._setOption=function(e){this.disabled=e},e}(),I([t.Input()],e.DroppableComponent.prototype,"data",void 0),I([t.Input()],e.DroppableComponent.prototype,"renderItem",void 0),I([t.Input()],e.DroppableComponent.prototype,"disabled",void 0),I([t.Output()],e.DroppableComponent.prototype,"zdSortChange",void 0),e.DroppableComponent=I([t.Component({selector:"az-droppable",template:'\x3c!-- <p>拖拽：</p>\n<span *ngFor="let item of data">{{item.name}}</span> --\x3e\n<div *ngIf="disabled">\n  <div>\n    <ng-container *ngFor="let item of data;let ii= index">\n      <ng-template [ngTemplateOutlet]="renderItem" [ngTemplateOutletContext]="{ $implicit: item, index: ii }">\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n\n<div *ngIf="!disabled">\n  \x3c!-- <span *ngFor="let item of data">{{item.name}} + "----"</span> --\x3e\n  <div [sortablejs]="data" [sortablejsOptions]="options">\n    <ng-container *ngFor="let item of data;let ii= index">\n      <ng-template [ngTemplateOutlet]="renderItem" [ngTemplateOutletContext]="{ $implicit: item, index: ii }">\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n\n',styles:[".example-list{display:block;overflow:hidden}.example-box{align-items:center;cursor:move;display:inline-flex;flex-direction:row}.cdk-drag-preview{border:1px solid red}.cdk-drop-list-dragging .cdk-drag{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating{transition:transform .3s cubic-bezier(0,0,.2,1)}"]})],e.DroppableComponent),e.UploadComponent=function(){function e(e,o,r){var a=this;this.cdr=e,this.localeService=o,this.injector=r,this.nzType="select",this.nzSort=!1,this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzCompress=!1,this.nzQuality=.5,this.NZConvertSize=5e3,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new t.EventEmitter,this.nzFileListChange=new t.EventEmitter,this.onStart=function(e){a.nzFileList||(a.nzFileList=[]);var t=a.fileToObject(e);t.status="uploading",a.nzFileList=a.nzFileList.concat(t),a.nzFileListChange.emit(a.nzFileList),a.nzChange.emit({file:t,fileList:a.nzFileList,type:"start"}),a.detectChangesList()},this.onProgress=function(e,t){var n=a.nzFileList,o=a.getFileItem(t,n);o.percent=e.percent,a.nzChange.emit({event:e,file:Object.assign({},o),fileList:a.nzFileList,type:"progress"}),a.detectChangesList()},this.onSuccess=function(e,t){var n=a.nzFileList,o=a.getFileItem(t,n);o.status="done",o.response=e,a.nzChange.emit({file:Object.assign({},o),fileList:n,type:"success"}),a.detectChangesList()},this.onError=function(e,t){var n=a.nzFileList,o=a.getFileItem(t,n);o.error=e,o.status=a.nzAction?"error":"done",a.nzChange.emit({file:Object.assign({},o),fileList:n,type:a.nzAction?"error":"success"}),a.detectChangesList()},this.onRemove=function(e){a.uploadComp.abort(e),e.status="removed";var t="function"==typeof a.nzRemove?a.nzRemove(e):null==a.nzRemove||a.nzRemove;(t instanceof n.Observable?t:n.of(t)).pipe(i.filter((function(e){return e}))).subscribe((function(){a.nzFileList=a.removeFileItem(e,a.nzFileList),a.nzChange.emit({file:e,fileList:a.nzFileList,type:"removed"}),a.nzFileListChange.emit(a.nzFileList),a.cdr.detectChanges()}))},this.prefixCls="ant-upload",this.classList=[],this.locale=this.localeService.getData("zu"),this.detectChangesList()}return Object.defineProperty(e.prototype,"nzShowUploadList",{get:function(){return this._showUploadList},set:function(e){this._showUploadList="boolean"==typeof e?r.toBoolean(e):e},enumerable:!0,configurable:!0}),e.prototype.zipOptions=function(){var e=this;"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});var t=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===t.findIndex((function(e){return"limit"===e.name}))&&t.push({name:"limit",fn:function(t){return t.slice(-e.nzLimit)}}),this.nzSize>0&&-1===t.findIndex((function(e){return"size"===e.name}))&&t.push({name:"size",fn:function(t){return t.filter((function(t){return t.size/1024<=e.nzSize}))}}),this.nzFileType&&this.nzFileType.length>0&&-1===t.findIndex((function(e){return"type"===e.name}))){var n=this.nzFileType.split(",");t.push({name:"type",fn:function(e){return e.filter((function(e){return~n.indexOf(e.type)}))}})}return this._btnOptions={compress:this.nzCompress,quality:this.nzQuality,convertSize:this.NZConvertSize,disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:t,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this},e.prototype.fileToObject=function(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}},e.prototype.getFileItem=function(e,t){return t.filter((function(t){return t.uid===e.uid}))[0]},e.prototype.removeFileItem=function(e,t){return t.filter((function(t){return t.uid!==e.uid}))},e.prototype.fileDrop=function(e){e.type!==this.dragState&&(this.dragState=e.type,this.setClassMap())},e.prototype.detectChangesList=function(){},e.prototype.setClassMap=function(){var e=[];"drag"===this.nzType?(this.nzFileList.some((function(e){return"uploading"===e.status}))&&e.push(this.prefixCls+"-drag-uploading"),"dragover"===this.dragState&&e.push(this.prefixCls+"-drag-hover")):e=[this.prefixCls+"-select-"+this.nzListType],this.classList=O([this.prefixCls,this.prefixCls+"-"+this.nzType],e,[this.nzDisabled&&this.prefixCls+"-disabled"||""]).filter((function(e){return!!e})),this.cdr.detectChanges()},e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.zipOptions().setClassMap()},e.prototype.listChange=function(e){this.nzFileList=e,console.log(e),this.nzChange.emit({file:e.length>0?e[e.length-1]:{},fileList:e,type:"sort"})},e}(),I([t.ViewChild("uploadComp",{static:!1})],e.UploadComponent.prototype,"uploadComp",void 0),I([t.ViewChild("listComp",{static:!1})],e.UploadComponent.prototype,"listComp",void 0),I([t.Input()],e.UploadComponent.prototype,"option",void 0),I([t.Input()],e.UploadComponent.prototype,"nzType",void 0),I([t.Input()],e.UploadComponent.prototype,"nzSort",void 0),I([t.Input(),r.InputNumber()],e.UploadComponent.prototype,"nzLimit",void 0),I([t.Input(),r.InputNumber()],e.UploadComponent.prototype,"nzSize",void 0),I([t.Input()],e.UploadComponent.prototype,"nzFileType",void 0),I([t.Input()],e.UploadComponent.prototype,"nzAccept",void 0),I([t.Input()],e.UploadComponent.prototype,"nzAction",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzDirectory",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzOpenFileDialogOnClick",void 0),I([t.Input()],e.UploadComponent.prototype,"nzBeforeUpload",void 0),I([t.Input()],e.UploadComponent.prototype,"nzCustomRequest",void 0),I([t.Input()],e.UploadComponent.prototype,"nzData",void 0),I([t.Input()],e.UploadComponent.prototype,"nzFilter",void 0),I([t.Input()],e.UploadComponent.prototype,"nzFileList",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzDisabled",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzCompress",void 0),I([t.Input()],e.UploadComponent.prototype,"nzQuality",void 0),I([t.Input()],e.UploadComponent.prototype,"NZConvertSize",void 0),I([t.Input()],e.UploadComponent.prototype,"nzHeaders",void 0),I([t.Input()],e.UploadComponent.prototype,"nzListType",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzMultiple",void 0),I([t.Input()],e.UploadComponent.prototype,"nzName",void 0),I([t.Input()],e.UploadComponent.prototype,"nzShowUploadList",null),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzShowButton",void 0),I([t.Input(),r.InputBoolean()],e.UploadComponent.prototype,"nzWithCredentials",void 0),I([t.Input()],e.UploadComponent.prototype,"nzRemove",void 0),I([t.Input()],e.UploadComponent.prototype,"nzPreview",void 0),I([t.Input()],e.UploadComponent.prototype,"nzPreviewFile",void 0),I([t.Input()],e.UploadComponent.prototype,"nzTransformFile",void 0),I([t.Input()],e.UploadComponent.prototype,"nzDownload",void 0),I([t.Input()],e.UploadComponent.prototype,"nzIconRender",void 0),I([t.Input()],e.UploadComponent.prototype,"nzFileListRender",void 0),I([t.Output()],e.UploadComponent.prototype,"nzChange",void 0),I([t.Output()],e.UploadComponent.prototype,"nzFileListChange",void 0),e.UploadComponent=I([t.Component({selector:"zu",template:'<ng-template #list>\r\n  <nz-upload-list *ngIf="!nzFileListRender" #listComp [style.display]="nzShowUploadList ? \'\' : \'none\'" [locale]="locale"\r\n    [listType]="nzListType" [items]="nzFileList || []" [icons]="$any(nzShowUploadList)" [iconRender]="nzIconRender"\r\n    [previewFile]="nzPreviewFile" [onPreview]="nzPreview" [onRemove]="onRemove" [onDownload]="nzDownload"\r\n    [nzAction]="nzAction" [nzSort]="nzSort" (listChange)="listChange($event)"></nz-upload-list>\r\n  <ng-container *ngIf="nzFileListRender">\r\n    <ng-container *ngTemplateOutlet="nzFileListRender; context: { $implicit: nzFileList }"></ng-container>\r\n  </ng-container>\r\n</ng-template>\r\n<ng-template #con>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n<ng-template #btn>\r\n  <div [ngClass]="classList" [style.display]="nzShowButton ? \'\' : \'none\'">\r\n    <div nz-upload-btn #uploadComp [options]="_btnOptions!">\r\n      <ng-template [ngTemplateOutlet]="con"></ng-template>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n<ng-container *ngIf="nzType === \'drag\'; else select">\r\n  <div [ngClass]="classList" (drop)="fileDrop($event)" (dragover)="fileDrop($event)" (dragleave)="fileDrop($event)">\r\n    <div nz-upload-btn #uploadComp [options]="_btnOptions!" class="ant-upload-btn">\r\n      <div class="ant-upload-drag-container">\r\n        <ng-template [ngTemplateOutlet]="con"></ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <ng-template [ngTemplateOutlet]="list"></ng-template>\r\n</ng-container>\r\n<ng-template #select>\r\n  <ng-container *ngIf="nzListType === \'picture-card\'; else pic">\r\n    <ng-template [ngTemplateOutlet]="list"></ng-template>\r\n    <ng-template [ngTemplateOutlet]="btn"></ng-template>\r\n  </ng-container>\r\n</ng-template>\r\n<ng-template #pic>\r\n  <ng-template [ngTemplateOutlet]="btn"></ng-template>\r\n  <ng-template [ngTemplateOutlet]="list"></ng-template>\r\n</ng-template>\r\n',styles:[".file_uplaod_list{border:1px solid #d9d9d9;border-radius:2px;cursor:pointer;float:left;height:104px;margin:0 8px 8px 0;padding:6px;position:relative;width:104px}.file_upload{height:90px;overflow:hidden;text-align:center;width:100%}.file_upload_icon{font-size:26px;line-height:54px;opacity:.8}.file_upload_text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file_uplaod_delete{color:red;font-size:18px;position:absolute;right:-4px;top:-4px}"]})],e.UploadComponent);var R=/^image\/.+$/,E=/^video\/.+$/;function N(e){return R.test(e)}function M(e){var t="";try{var n=e.split(".");t=n[n.length-1]}catch(e){t=""}if(!t)return!1;t=t.toLocaleLowerCase();if(["png","jpg","jpeg","bmp","gif"].find((function(e){return e===t})))return"image";if(["txt"].find((function(e){return e===t})))return"txt";if(["xls","xlsx"].find((function(e){return e===t})))return"excel";if(["doc","docx"].find((function(e){return e===t})))return"word";if(["pdf"].find((function(e){return e===t})))return"pdf";if(["ppt","pptx"].find((function(e){return e===t})))return"ppt";if(["mp4","m2v","mkv","rmvb","wmv","avi","flv","mov","m4v"].find((function(e){return e===t})))return"video";return["mp3","wav","wmv"].find((function(e){return e===t}))?"radio":"other"}function B(e,t){return e==t}e.ComponentsService=function(){function e(e,t){var n=this;this.injector=e,this.modal=t,this.filePreview=function(e){return T(n,void 0,void 0,(function(){var t,n;return S(this,(function(o){switch(o.label){case 0:return!N(e.type)&&!B(M(e.name),"image")||e.url||e.preview?[3,2]:(t=e,[4,this.getBase64(e.originFileObj)]);case 1:t.preview=o.sent(),o.label=2;case 2:return n=e.url||e.preview,N(e.type)||B(M(e.name),"image")?this.modal.create({nzContent:'<img src="'+n+'" width="100%"/>',nzFooter:null}):(i=e.type,E.test(i)||B(M(e.name),"video")?this.modal.create({nzContent:'<video src="'+n+'" controls="controls" width="100%">您的浏览器不支持视频播放</video>',nzFooter:null}):window.open(n)),[2]}var i}))}))}}return e.prototype.getBase64=function(e){return new Promise((function(t,n){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){return t(o.result)},o.onerror=function(e){return n(e)}}))},e}(),e.ComponentsService.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e.ComponentsService(t.ɵɵinject(t.INJECTOR),t.ɵɵinject(a.NzModalService))},token:e.ComponentsService,providedIn:"root"}),e.ComponentsService=I([t.Injectable({providedIn:"root"})],e.ComponentsService);var q=[{type:"ball-pulse",num:3},{type:"ball-grid-pulse",num:9},{type:"ball-clip-rotate",num:1},{type:"ball-clip-rotate-pulse",num:2},{type:"square-spin",num:1},{type:"ball-clip-rotate-multiple",num:2},{type:"ball-pulse-rise",num:5},{type:"ball-rotate",num:1},{type:"cube-transition",num:2},{type:"ball-zig-zag",num:2},{type:"ball-zig-zag-deflect",num:2},{type:"ball-triangle-path",num:3},{type:"ball-scale",num:1},{type:"line-scale",num:5},{type:"line-scale-party",num:4},{type:"ball-scale-multiple",num:3},{type:"ball-pulse-sync",num:3},{type:"ball-beat",num:3},{type:"line-scale-pulse-out",num:5},{type:"line-scale-pulse-out-rapid",num:5},{type:"ball-scale-ripple",num:1},{type:"ball-scale-ripple-multiple",num:3},{type:"ball-spin-fade-loader",num:8},{type:"line-spin-fade-loader",num:8},{type:"triangle-skew-spin",num:1},{type:"pacman",num:5},{type:"ball-grid-beat",num:9},{type:"semi-circle-spin",num:1}];e.ɵf=function(){function e(){this.type="ball-beat",this.loading=!1,this.color="#000",this.className="ball-beat",this.loadList=[1,1,1],this._size=10}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.type&&this._getLoader(e.type.currentValue),e.size&&this._getSize(e.size.currentValue)},e.prototype._getSize=function(e){switch(e){case"samll":this._size=5;break;case"large":this._size=15;break;default:this._size=10}},e.prototype._getLoader=function(e){var t,n;try{for(var o=k(q),i=o.next();!i.done;i=o.next()){var r=i.value;r.type==e&&(this.loadList=new Array(r.num))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this.className=e},e}(),I([t.Input()],e.ɵf.prototype,"type",void 0),I([t.Input()],e.ɵf.prototype,"loading",void 0),I([t.Input()],e.ɵf.prototype,"color",void 0),I([t.Input()],e.ɵf.prototype,"size",void 0),e.ɵf=I([t.Component({selector:"az-loading",template:'\r\n\r\n<nz-spin style="min-width:100%;min-height:100%;" [nzSpinning]="loading" [nzDelay]="500" [nzIndicator]="indicatorTemplate"> \r\n  <ng-content></ng-content>\r\n</nz-spin>\r\n<ng-template #indicatorTemplate>\r\n    <div class="loader" style="position: absolute;top: 50%;left: 50%;margin: -10px;">\r\n        <div class="loader-inner {{className}}" >\r\n          <div *ngFor="let item of loadList" [ngStyle]="{\'background\': color?color:null,\'width\':_size+\'px\',height:_size+\'px\'}"></div>\r\n        </div>\r\n      </div>\r\n</ng-template>',styles:[":host{align-items:center;background-color:hsla(0,0%,100%,.5);display:block;height:100%;justify-content:center;width:100%}"]})],e.ɵf),e.LoadingService=function(){function t(e,t){this.overlay=e,this.overlayContainer=t,this.hasBackdrop=!0}return t.prototype.create=function(t,n){this.overlayRef=this.overlay.create({hasBackdrop:this.hasBackdrop,width:"100%",height:"100%",panelClass:["modal","is-active"],backdropClass:"modal-background",scrollStrategy:this.overlay.scrollStrategies.block()}),this.component=this.overlayRef.attach(new l.ComponentPortal(e.ɵf)),this._getComponentInstance(this.component.instance,t)},t.prototype._getComponentInstance=function(e,t){e.loading=!0,t&&t.color&&(e.color=t.color),t&&t.type&&(e.type=t.type),t&&t.size&&(e.size=t.size)},t.prototype.destroy=function(e){this.component.destroy(),this.overlayRef.dispose()},t}(),e.LoadingService.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e.LoadingService(t.ɵɵinject(s.Overlay),t.ɵɵinject(s.OverlayContainer))},token:e.LoadingService,providedIn:"root"}),e.LoadingService=I([t.Injectable({providedIn:"root"})],e.LoadingService),e.ɵg=function(){function e(){this.fileList=[],this.index=0,this.show=!0}return e.prototype.ngOnInit=function(){},e.prototype.getType=function(e){return M(e)},e.prototype.close=function(){this.show=!1},e.prototype.changeIndex=function(e){switch(e){case"next":this.index+1>=this.fileList.length?this.index=0:this.index=this.index+1;break;case"perv":this.index-1<0?this.index=this.fileList.length-1:this.index=this.index-1}},e}(),I([t.ViewChild("element",{read:t.ViewContainerRef})],e.ɵg.prototype,"element",void 0),I([t.Input()],e.ɵg.prototype,"fileList",void 0),I([t.Input()],e.ɵg.prototype,"index",void 0),e.ɵg=I([t.Component({selector:"az-file-view",template:'<div class="file-view-container" *ngIf="show">\n  <div class="file-view-container-close">\n    <i (click)="close()" nz-icon nzType="close" nzTheme="outline"></i>\n  </div>\n  <div class="file-view-container-content">\n    <div class=\'file-view-container-icon\'>\n      <i (click)="changeIndex(\'perv\')" nz-icon nzType="left" nzTheme="outline"></i>\n    </div>\n    <div class=\'file-view-container-content-view\'>\n      <div *ngIf="fileList && fileList.length;else empty">\n        <div [ngSwitch]="getType(fileList[index].name)">\n          <p *ngSwitchCase="\'image\'">\n            <img [src]="fileList[index].url?fileList[index].url:fileList[index].thumbUrl" />\n          </p>\n          <p *ngSwitchCase="\'video\'">\n            <video [src]="fileList[index].url?fileList[index].url:fileList[index].thumbUrl" controls="controls"\n              width="100%">您的浏览器不支持视频播放</video>\n          </p>\n          <p *ngSwitchDefault>\n            <span>暂不支持查看</span>\n          </p>\n        </div>\n        <p>{{index+1}} / {{fileList.length}} </p>\n      </div>\n      <ng-template #empty>\n        <nz-empty nzNotFoundImage="simple"></nz-empty>\n      </ng-template>\n\n    </div>\n    <div class=\'file-view-container-icon\'><i (click)="changeIndex(\'next\')" nz-icon nzType="right" nzTheme="outline"></i>\n    </div>\n  </div>\n</div>\n',styles:[".file-view-container{-webkit-box-align:center;-webkit-overflow-scrolling:touch;background-color:rgba(12,15,19,.5);display:flex;flex-direction:column;height:100vh;left:0;overflow-y:auto;padding:24px;position:fixed;right:0;top:0;width:100%;z-index:109}.file-view-container .file-view-container-close{background:0 0;border-color:transparent;box-shadow:none;color:#fff;font-size:30px;text-align:right;width:100%}.file-view-container .file-view-container-content{display:flex;flex-flow:row;height:100%}.file-view-container .file-view-container-content .file-view-container-content-view{border-radius:6px;display:flex;flex:1;height:80%;margin:24px;padding:15px;width:calc(100vw - 160px)}.file-view-container .file-view-container-content .file-view-container-content-view>div{display:flex;flex-direction:column;justify-content:center;width:100%}.file-view-container .file-view-container-content .file-view-container-content-view img{max-height:75vh;max-width:112.49vh;min-height:300px;min-width:449.958px}.file-view-container .file-view-container-content .file-view-container-content-view p{color:#fff;text-align:center}.file-view-container .file-view-container-content .file-view-container-icon{align-items:center;color:#fff;display:flex;font-size:35px;height:70%;justify-content:center;opacity:.6}.file-view-container .file-view-container-content .file-view-container-icon:hover{opacity:1}i{cursor:pointer}"]})],e.ɵg),e.FileViewService=function(){function t(e,t){this.overlay=e,this.overlayContainer=t,this.hasBackdrop=!0}return t.prototype.show=function(){console.log("456")},t.prototype.create=function(t){this.overlayRef=this.overlay.create(),this.component=this.overlayRef.attach(new l.ComponentPortal(e.ɵg)),this._getComponentInstance(this.component.instance,t)},t.prototype._getComponentInstance=function(e,t){t.fileList&&(e.fileList=t.fileList),t.index&&(e.index=t.index)},t.prototype.destroy=function(){this.component.destroy(),this.overlayRef.dispose()},t}(),e.FileViewService.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e.FileViewService(t.ɵɵinject(s.Overlay),t.ɵɵinject(s.OverlayContainer))},token:e.FileViewService,providedIn:"root"}),e.FileViewService=I([t.Injectable({providedIn:"root"})],e.FileViewService);var $=function(){};e.ɵb=function(){function e(e){this.router=e,this.loading=!1,this._selectedIndex=0}return e.prototype.ngOnInit=function(){console.log(this.options)},e.prototype._getExtraLink=function(e){console.log("link:"+e),"back"==e?history.go(-1):this.router.navigateByUrl(e)},e.prototype._selectChange=function(e){this._selectedIndex=e[0].index},e}(),I([t.Input()],e.ɵb.prototype,"options",void 0),I([t.Input()],e.ɵb.prototype,"loading",void 0),e.ɵb=I([t.Component({selector:"zc",template:'<nz-card [nzTitle]="options.title" [nzLoading]="loading" [nzExtra]="options.extra?extraTpl:null" [nzBordered]="options.bordered">\r\n  <ng-template #extraTpl>\r\n\r\n    <ng-container *ngIf="options.extra.type ==\'button\';else extraLink">\r\n      <button *ngFor="let item of options.extra.buttons"\r\n        (click)="item.link?_getExtraLink(item.link):(item.click?item.click():null)" [nzDanger]="item.danger"\r\n        [disabled]="item.diabled" nz-button [nzType]="item.type">{{item.text}}</button>\r\n    </ng-container>\r\n\r\n    <ng-template #extraLink>\r\n      <a nz-button *ngFor="let item of options.extra.buttons" nzType="link" [nzDanger]="item.danger"\r\n        [disabled]="item.diabled"\r\n        (click)="item.link?_getExtraLink(item.link):(item.click?item.click():null)">{{item.text}}</a>\r\n    </ng-template>\r\n\r\n\r\n  </ng-template>\r\n\r\n  <nz-card-tab *ngIf="options.tabs">\r\n    <nz-tabset [nzSize]="options.tabs.size" [nzSelectedIndex]="_selectedIndex"\r\n      (nzSelectChange)="_selectChange([$event])">\r\n      <nz-tab *ngFor="let item of options.tabs.values; let i=index" [nzTitle]="item.title" [nzDisabled]="item.disabled">\r\n      </nz-tab>\r\n    </nz-tabset>\r\n\r\n  </nz-card-tab>\r\n  <ng-container *ngIf="options.tabs.values">\r\n    <ng-template [ngTemplateOutlet]="options.tabs.values[_selectedIndex].component"></ng-template>\r\n  </ng-container>\r\n\r\n\r\n  <ng-content></ng-content>\r\n\r\n\r\n</nz-card>\r\n',styles:["[nz-button]{margin-bottom:12px;margin-right:8px}"]})],e.ɵb),e.ɵc=function(){function e(e,t,n){if(this.http=e,this.fileService=t,this.comService=n,this.reqs={},this.destroy=!1,!e)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}return e.prototype.onClick=function(){!this.options.disabled&&this.options.openFileDialogOnClick&&this.file.nativeElement.click()},e.prototype.onKeyDown=function(e){this.options.disabled||"Enter"!==e.key&&e.keyCode!==u.ENTER||this.onClick()},e.prototype.onFileDrop=function(e){var t=this;if(this.options.disabled||"dragover"===e.type)e.preventDefault();else{if(this.options.directory)this.traverseFileTree(e.dataTransfer.items);else{var n=Array.prototype.slice.call(e.dataTransfer.files).filter((function(e){return t.attrAccept(e,t.options.accept)}));n.length&&this.uploadFiles(n)}e.preventDefault()}},e.prototype.onChange=function(e){if(!this.options.disabled){var t=e.target;this.uploadFiles(t.files),t.value=""}},e.prototype.traverseFileTree=function(e){var t,n,o=this,i=function(e,t){if(e.isFile)e.file((function(e){o.attrAccept(e,o.options.accept)&&o.uploadFiles([e])}));else if(e.isDirectory){e.createReader().readEntries((function(n){var o,r;try{for(var a=k(n),l=a.next();!l.done;l=a.next()){var p=l.value;i(p,""+t+e.name+"/")}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}}))}};try{for(var r=k(e),a=r.next();!a.done;a=r.next()){var l=a.value;i(l.webkitGetAsEntry(),"")}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.attrAccept=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),o=""+e.name,i=""+e.type,r=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?-1!==o.toLowerCase().indexOf(t.toLowerCase(),o.toLowerCase().length-t.toLowerCase().length):/\/\*$/.test(t)?r===t.replace(/\/.*$/,""):i===t}))}return!0},e.prototype.attachUid=function(e){return e.uid||(e.uid=Math.random().toString(36).substring(2)),e},e.prototype.uploadFiles=function(e){var t=this,o=n.of(Array.prototype.slice.call(e));this.options.filters&&this.options.filters.forEach((function(e){o=o.pipe(i.switchMap((function(t){var o=e.fn(t);return o instanceof n.Observable?o:n.of(o)})))})),o.subscribe((function(e){e.forEach((function(n){t.attachUid(n),t.upload(n,e)}))}),(function(e){f.warn("Unhandled upload filter error",e)}))},e.prototype.upload=function(e,t){return T(this,void 0,void 0,(function(){var o,i,r=this;return S(this,(function(a){switch(a.label){case 0:return this.options.compress&&t&&1==t.length?[4,this.fileService.compress(t[0],this.options.quality,this.options.convertSize)]:[3,2];case 1:(o=a.sent()).uid=e.uid,e=o,t[0]=o,a.label=2;case 2:if(!this.options.beforeUpload)return[2,this.post(e)];if((i=this.options.beforeUpload(e,t))instanceof n.Observable)i.subscribe((function(t){var n=Object.prototype.toString.call(t);"[object File]"===n||"[object Blob]"===n?(r.attachUid(t),r.post(t)):"boolean"==typeof t&&!1!==t&&r.post(e)}),(function(e){f.warn("Unhandled upload beforeUpload error",e)}));else if(!1!==i)return[2,this.post(e)];return[2]}}))}))},e.prototype.post=function(e){var t=this;if(!this.destroy){var o=n.of(e),r=this.options,a=e.uid,l=r.action,p=r.data,s=r.headers,c=r.transformFile,d={action:"string"==typeof l?l:"",name:r.name,headers:s,file:e,postFile:e,data:p,withCredentials:r.withCredentials,onProgress:r.onProgress?function(t){r.onProgress(t,e)}:void 0,onSuccess:function(n,o){t.clean(a),r.onSuccess(n,e,o)},onError:function(n){t.clean(a),r.onError(n,e)}};if("function"==typeof l){var u=l(e);u instanceof n.Observable?o=o.pipe(i.switchMap((function(){return u})),i.map((function(t){return d.action=t,e}))):d.action=u}if("function"==typeof c){var h=c(e);o=o.pipe(i.switchMap((function(){return h instanceof n.Observable?h:n.of(h)})))}if("function"==typeof p){var g=p(e);g instanceof n.Observable?o=o.pipe(i.switchMap((function(){return g})),i.map((function(t){return d.data=t,e}))):d.data=g}if("function"==typeof s){var m=s(e);m instanceof n.Observable?o=o.pipe(i.switchMap((function(){return m})),i.map((function(t){return d.headers=t,e}))):d.headers=m}o.subscribe((function(o){d.postFile=o;var i=(r.customRequest||t.xhr).call(t,d);i instanceof n.Subscription||f.warn("Must return Subscription type in '[nzCustomRequest]' property"),t.reqs[a]=i,r.onStart(e)}))}},e.prototype.xhr=function(e){var t=this,n=new FormData;e.data&&Object.keys(e.data).map((function(t){n.append(t,e.data[t])})),n.append(e.name,e.postFile),e.headers||(e.headers={}),null!==e.headers["X-Requested-With"]?e.headers["X-Requested-With"]="XMLHttpRequest":delete e.headers["X-Requested-With"];var o=new h.HttpRequest("POST",e.action,n,{reportProgress:!0,withCredentials:e.withCredentials,headers:new h.HttpHeaders(e.headers)});return this.http.request(o).subscribe((function(t){t.type===h.HttpEventType.UploadProgress?(t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t,e.file)):t instanceof h.HttpResponse&&e.onSuccess(t.body,e.file,t)}),(function(n){t.abort(e.file),e.onError(n,e.file)}))},e.prototype.clean=function(e){var t=this.reqs[e];t instanceof n.Subscription&&t.unsubscribe(),delete this.reqs[e]},e.prototype.abort=function(e){var t=this;e?this.clean(e&&e.uid):Object.keys(this.reqs).forEach((function(e){return t.clean(e)}))},e.prototype.ngOnDestroy=function(){this.destroy=!0,this.abort()},e}(),I([t.ViewChild("file",{static:!1})],e.ɵc.prototype,"file",void 0),I([t.Input()],e.ɵc.prototype,"options",void 0),e.ɵc=I([t.Component({selector:"[nz-upload-btn]",exportAs:"nzUploadBtn",template:'<input\r\n  type="file"\r\n  #file\r\n  (change)="onChange($event)"\r\n  [attr.accept]="options.accept"\r\n  [attr.directory]="options.directory ? \'directory\' : null"\r\n  [attr.webkitdirectory]="options.directory ? \'webkitdirectory\' : null"\r\n  [multiple]="options.multiple"\r\n  style="display: none;"\r\n/>\r\n<ng-content></ng-content>\r\n',host:{"[attr.tabindex]":'"0"',"[attr.role]":'"button"',"[class.ant-upload]":"true","[class.ant-upload-disabled]":"options.disabled","(click)":"onClick()","(keydown)":"onKeyDown($event)","(drop)":"onFileDrop($event)","(dragover)":"onFileDrop($event)"},preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}),x(0,t.Optional())],e.ɵc);var A=function(e){return!!e&&0===e.indexOf("image/")};e.ɵe=function(){function e(e,n,o,i){this.cdr=e,this.doc=n,this.ngZone=o,this.platform=i,this.list=[],this.locale={},this.nzSort=!1,this.iconRender=null,this.listChange=new t.EventEmitter}return Object.defineProperty(e.prototype,"showPic",{get:function(){return"picture"===this.listType||"picture-card"===this.listType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{set:function(e){this.list=e},enumerable:!0,configurable:!0}),e.prototype.genErr=function(e){return e.response&&"string"==typeof e.response?e.response:e.error&&e.error.statusText||(this.locale?this.nzAction?this.locale.uploadError:this.locale.uploadStorage:"loading...")},e.prototype.extname=function(e){var t=e.split("/"),n=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]},e.prototype.isImageUrl=function(e){if(A(e.type))return!0;var t=e.thumbUrl||e.url||"";if(!t)return!1;var n=this.extname(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(n))||!/^data:/.test(t)&&!n},e.prototype.getIconType=function(e){return this.showPic?e.isUploading||!e.thumbUrl&&!e.url?"uploading":"thumbnail":""},e.prototype.previewImage=function(e){var t=this;return new Promise((function(n){A(e.type)?t.ngZone.runOutsideAngular((function(){var o=t.doc.createElement("canvas");o.width=200,o.height=200,o.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",t.doc.body.appendChild(o);var i=o.getContext("2d"),r=new Image;r.onload=function(){var e=r.width,a=r.height,l=200,p=200,s=0,c=0;e<a?c=-((p=a*(200/e))-l)/2:s=-((l=e*(200/a))-p)/2;try{i.drawImage(r,s,c,l,p)}catch(e){}var d=o.toDataURL();t.doc.body.removeChild(o),n(d)},r.src=window.URL.createObjectURL(e)})):n("")}))},e.prototype.genThumb=function(){var e=this;if(this.platform.isBrowser){var t=window;this.showPic&&"undefined"!=typeof document&&void 0!==t&&t.FileReader&&t.File&&this.list.filter((function(e){return e.originFileObj instanceof File&&void 0===e.thumbUrl})).forEach((function(t){t.thumbUrl="",(e.previewFile?e.previewFile(t).toPromise():e.previewImage(t.originFileObj)).then((function(n){t.thumbUrl=n,e.detectChanges()}))}))}},e.prototype.listItemNameCls=function(e){var t,n=[this.showDownload(e),this.icons.showRemoveIcon].filter((function(e){return e})).length;return(t={})["ant-upload-list-item-name"]=!0,t["ant-upload-list-item-name-icon-count-"+n]=!0,t},e.prototype.showDownload=function(e){return!(!this.icons.showDownloadIcon||"done"!==e.status)},e.prototype.fixData=function(){var e=this;this.list.forEach((function(t){t.isUploading="uploading"===t.status,t.message=e.genErr(t),t.linkProps="string"==typeof t.linkProps?JSON.parse(t.linkProps):t.linkProps,t.isImageUrl=e.isImageUrl(t),t.iconType=e.getIconType(t),t.listItemNameCls=e.listItemNameCls(t),t.showDownload=e.showDownload(t)}))},e.prototype.handlePreview=function(e,t){if(this.onPreview)return t.preventDefault(),this.onPreview(e)},e.prototype.handleRemove=function(e,t){t.preventDefault(),this.onRemove&&this.onRemove(e)},e.prototype.handleDownload=function(e){"function"==typeof this.onDownload?this.onDownload(e):e.url&&window.open(e.url)},e.prototype.detectChanges=function(){this.fixData(),this.cdr.detectChanges()},e.prototype.ngOnChanges=function(){this.fixData(),this.genThumb()},e.prototype.sortChange=function(e){this.list=e,this.listChange.emit(e)},e}(),I([t.Input()],e.ɵe.prototype,"locale",void 0),I([t.Input()],e.ɵe.prototype,"nzSort",void 0),I([t.Input()],e.ɵe.prototype,"listType",void 0),I([t.Input()],e.ɵe.prototype,"nzAction",void 0),I([t.Input()],e.ɵe.prototype,"items",null),I([t.Input()],e.ɵe.prototype,"icons",void 0),I([t.Input()],e.ɵe.prototype,"onPreview",void 0),I([t.Input()],e.ɵe.prototype,"onRemove",void 0),I([t.Input()],e.ɵe.prototype,"onDownload",void 0),I([t.Input()],e.ɵe.prototype,"previewFile",void 0),I([t.Input()],e.ɵe.prototype,"iconRender",void 0),I([t.Output()],e.ɵe.prototype,"listChange",void 0),e.ɵe=I([t.Component({selector:"nz-upload-list",exportAs:"nzUploadList",template:'\x3c!-- <div *ngFor="let item of list">{{item.name}}</div> --\x3e\r\n<az-droppable *ngIf="list" [data]="list" [disabled]="!nzSort" [renderItem]="renderItems" (zdSortChange)="sortChange($event)"></az-droppable>\r\n<ng-template #renderItems let-file>\r\n  <div class="ant-upload-list-item ant-upload-list-item-{{\r\n    file.status\r\n  }} ant-upload-list-item-list-type-{{ listType }}">\r\n  <ng-template #icon>\r\n    <ng-container [ngSwitch]="file.iconType">\r\n      <div *ngSwitchCase="\'uploading\'" class="ant-upload-list-item-thumbnail"\r\n        [class.ant-upload-list-item-file]="!file.isUploading">\r\n        <ng-template [ngTemplateOutlet]="iconNode" [ngTemplateOutletContext]="{ $implicit: file }"></ng-template>\r\n      </div>\r\n      <a *ngSwitchCase="\'thumbnail\'" class="ant-upload-list-item-thumbnail"\r\n        [class.ant-upload-list-item-file]="!file.isImageUrl" target="_blank" rel="noopener noreferrer"\r\n        [href]="file.url || file.thumbUrl" (click)="handlePreview(file, $event)">\r\n        <img *ngIf="file.isImageUrl; else noImageThumbTpl" class="ant-upload-list-item-image"\r\n          [src]="file.thumbUrl || file.url" [attr.alt]="file.name" />\r\n      </a>\r\n      <span *ngSwitchDefault class="ant-upload-text-icon">\r\n        <ng-template [ngTemplateOutlet]="iconNode" [ngTemplateOutletContext]="{ $implicit: file }"></ng-template>\r\n      </span>\r\n    </ng-container>\r\n    <ng-template #noImageThumbTpl>\r\n      <ng-template [ngTemplateOutlet]="iconNode" [ngTemplateOutletContext]="{ $implicit: file }"></ng-template>\r\n    </ng-template>\r\n  </ng-template>\r\n  <ng-template #iconNode let-file>\r\n    <ng-container *ngIf="!iconRender; else iconRender">\r\n      <ng-container [ngSwitch]="listType">\r\n        <ng-container *ngSwitchCase="\'picture\'">\r\n          <ng-container *ngIf="file.isUploading; else iconNodeFileIcon">\r\n            <i nz-icon nzType="loading"></i>\r\n          </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase="\'picture-card\'">\r\n          <ng-container *ngIf="file.isUploading; else iconNodeFileIcon">{{\r\n            locale.uploading\r\n          }}</ng-container>\r\n        </ng-container>\r\n        <i *ngSwitchDefault nz-icon [nzType]="file.isUploading ? \'loading\' : \'paper-clip\'"></i>\r\n      </ng-container>\r\n    </ng-container>\r\n    <ng-template #iconNodeFileIcon>\r\n      <i nz-icon [nzType]="file.isImageUrl ? \'picture\' : \'file\'" nzTheme="twotone"></i>\r\n    </ng-template>\r\n  </ng-template>\r\n  <ng-template #downloadOrDelete>\r\n    <span *ngIf="listType !== \'picture-card\'"\r\n      class="ant-upload-list-item-card-actions {{ listType === \'picture\' ? \'picture\' : \'\' }}">\r\n      <a *ngIf="file.showDownload" title="{{ locale.downloadFile }}">\r\n        <ng-template [ngTemplateOutlet]="downloadIcon"></ng-template>\r\n      </a>\r\n      <a *ngIf="icons.showRemoveIcon" title="{{ locale.removeFile }}">\r\n        <ng-template [ngTemplateOutlet]="removeIcon"></ng-template>\r\n      </a>\r\n    </span>\r\n  </ng-template>\r\n  <ng-template #preview>\r\n    <a *ngIf="file.url" target="_blank" rel="noopener noreferrer" [ngClass]="file.listItemNameCls!"\r\n      [attr.title]="file.name" [href]="file.url" [attr.download]="file.linkProps && file.linkProps.download"\r\n      (click)="handlePreview(file, $event)">{{ file.name }}</a>\r\n    <span *ngIf="!file.url" [ngClass]="file.listItemNameCls!" [attr.title]="file.name"\r\n      (click)="handlePreview(file, $event)">{{ file.name }}</span>\r\n    <ng-template [ngTemplateOutlet]="downloadOrDelete"></ng-template>\r\n  </ng-template>\r\n  <ng-template #removeIcon>\r\n    <i *ngIf="icons.showRemoveIcon" (click)="handleRemove(file, $event)" nz-icon nzType="delete"\r\n      title="{{ locale.removeFile }}"></i>\r\n  </ng-template>\r\n  <ng-template #downloadIcon>\r\n    <i *ngIf="file.showDownload" (click)="handleDownload(file)" nz-icon nzType="download"\r\n      title="{{ locale.downloadFile }}"></i>\r\n  </ng-template>\r\n  <div class="ant-upload-list-item-info">\r\n    <span>\r\n      <ng-template [ngTemplateOutlet]="icon"></ng-template>\r\n      <ng-template [ngTemplateOutlet]="preview"></ng-template>\r\n    </span>\r\n  </div>\r\n  <span *ngIf="listType === \'picture-card\' && !file.isUploading" class="ant-upload-list-item-actions">\r\n    <a *ngIf="icons.showPreviewIcon" [href]="file.url || file.thumbUrl" target="_blank" rel="noopener noreferrer"\r\n      title="{{ locale.previewFile }}"\r\n      [ngStyle]="!(file.url || file.thumbUrl) ? { opacity: 0.5, \'pointer-events\': \'none\' } : null"\r\n      (click)="handlePreview(file, $event)">\r\n      <i nz-icon nzType="eye"></i>\r\n    </a>\r\n    <ng-template [ngTemplateOutlet]="downloadIcon"></ng-template>\r\n    <ng-template [ngTemplateOutlet]="removeIcon"></ng-template>\r\n  </span>\r\n  <div *ngIf="file.isUploading" class="ant-upload-list-item-progress">\r\n    <nz-progress [nzPercent]="file.percent!" nzType="line" [nzShowInfo]="false" [nzStrokeWidth]="2"></nz-progress>\r\n  </div>\r\n</div>\r\n</ng-template>\r\n',animations:[g.trigger("itemState",[g.transition(":enter",[g.style({height:"0",width:"0",opacity:0}),g.animate(150,g.style({height:"*",width:"*",opacity:1}))]),g.transition(":leave",[g.animate(150,g.style({height:"0",width:"0",opacity:0}))])])],host:{"[class.ant-upload-list]":"true","[class.ant-upload-list-text]":"listType === 'text'","[class.ant-upload-list-picture]":"listType === 'picture'","[class.ant-upload-list-picture-card]":"listType === 'picture-card'"},preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}),x(1,t.Inject(c.DOCUMENT))],e.ɵe),e.ɵh=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e,t,n,o){return void 0===o&&(o=function(e,t){return""}),this.sanitizer.bypassSecurityTrustHtml(o(t,n))},e}(),e.ɵh=I([t.Pipe({name:"renderPipe"})],e.ɵh),e.ɵi=function(){function e(){}return e.prototype.transform=function(e,t){if(e+="",t&&t.length>=0){if(m.isEmpty(e))return"";for(var n=e.split(","),o=new Array,i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i]==t[r].code+""){o.push(t[r].label);break}return o.join(",")}return e},e}(),e.ɵi=I([t.Pipe({name:"tablePipe"})],e.ɵi);var V=[e.DroppableComponent,e.ɵb,e.TableColumnsButtonsComponent,e.TableComponent,e.ɵc,e.ɵe,e.UploadComponent,e.ɵf,e.ɵg],H=[d.NzCardModule,d.NzIconModule,d.NzTabsModule,d.NzButtonModule,d.NzDividerModule,d.NzTableModule,d.NzSpinModule,d.NzCheckboxModule,d.NzRadioModule,d.NzProgressModule,d.NzEmptyModule],W=[e.ɵh,e.ɵi];c.registerLocaleData(y);var Z=[w.AccountBookFill,w.AlertOutline,w.AlertFill];e.NgZoesModule=function(){},e.NgZoesModule=I([t.NgModule({declarations:O(V,W),imports:O([c.CommonModule,o.NzI18nModule,e.LocaleModule,h.HttpClientModule,s.OverlayModule,v.BrowserAnimationsModule,b.FormsModule,d.NzIconModule.forRoot(Z),z.SortablejsModule.forRoot({animation:150})],H),providers:[d.NzModalService],entryComponents:[e.ɵf,e.ɵg],exports:O(V)})],e.NgZoesModule),e.ɵa=function(){function e(e){this.httpClient=e}return e.prototype.patchHero=function(e,t){return this.httpClient.request("GET",e,t)},e}(),e.ɵa.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e.ɵa(t.ɵɵinject(h.HttpClient))},token:e.ɵa,providedIn:"root"}),e.ɵa=I([t.Injectable({providedIn:"root"})],e.ɵa),e.ɵd=function(){var e=this;this.compress=function(t,n,o){return T(e,void 0,void 0,(function(){return S(this,(function(e){return/image\/\w+/.test(t.type)?t.size<o?[2,!1]:[2,new Promise((function(e,o){(new C).compress(t,{quality:n,maxWidth:1e3,maxHeight:1e3,convertSize:614400,success:function(n){e(new File([n],t.name,{type:t.type}))},error:function(e){o(e)}})}))]:[2,!1]}))}))}},e.ɵd.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e.ɵd},token:e.ɵd,providedIn:"root"}),e.ɵd=I([t.Injectable({providedIn:"root"})],e.ɵd),e.LOCALE_SERVICE_PROVIDER=D,e.LOCALE_SERVICE_PROVIDER_FACTORY=P,e.NzShowUploadListInterface=$,e.ZOE_LOCALE=F,e.en_US={abbr:"en-US",zt:{emptyText:"No data",clearText:"Clear",total:"{{range[0]}} - {{range[1]}} of {{total}}"},zu:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file",uploadStorage:"Temporary storage"},zf:{submit:"Submit",cancel:"Cancel"}},e.zh_CN=L,e.zh_TW={abbr:"zh-TW",zt:{emptyText:"暫無數據",clearText:"清空",total:"共 {{total}} 條"},zu:{uploading:"正在上傳...",removeFile:"刪除檔案",uploadError:"上傳失敗",previewFile:"檔案預覽",downloadFile:"下载文件",uploadStorage:"暫存檔案"},zf:{submit:"提交",cancel:"取消"}},e.ɵ0=j,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zoes.umd.min.js.map